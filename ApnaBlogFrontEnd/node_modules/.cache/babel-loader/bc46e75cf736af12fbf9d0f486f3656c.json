{"ast":null,"code":"var _jsxFileName = \"E:\\\\React Appliction\\\\Running Apps\\\\blog-frontend\\\\src\\\\Components\\\\Forms\\\\NewCommentForm.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useEffect, useRef, useState } from \"react\";\nimport { Card, FloatingLabel, Form } from \"react-bootstrap\";\nimport { Formik } from \"formik\";\nimport * as Yup from \"yup\";\nimport SubmitButton from \"../SubmitButton\";\nimport Banner from \"../Banner\";\nimport AuthContext from \"../../store/auth-context\";\nimport { submitNewComment } from \"../../lib/api\";\nimport { useTranslation } from \"react-i18next\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst NewCommentForm = _ref => {\n  _s();\n\n  let {\n    postId,\n    onContentChange\n  } = _ref;\n  const [isSubmitted, setIsSubmitted] = useState(false);\n  const authCtx = useContext(AuthContext);\n  const textAreaRef = useRef(null);\n  const {\n    t\n  } = useTranslation();\n\n  const onSubmit = (comment, formikHelpers) => {\n    setTimeout(() => {\n      submitNewComment({\n        id: postId,\n        ...comment\n      }, authCtx.token).then(() => {\n        formikHelpers.resetForm();\n        setIsSubmitted(true);\n      }).catch(error => {\n        console.log(error);\n      }).finally(() => {\n        formikHelpers.setSubmitting(false);\n      });\n    }, 2000);\n  };\n\n  useEffect(() => {\n    setTimeout(() => {\n      if (isSubmitted) {\n        setIsSubmitted(false);\n        onContentChange();\n      }\n    }, 2000);\n  }, [isSubmitted]);\n  useEffect(() => {\n    textAreaRef.current.style.height = \"100px\";\n  });\n  return /*#__PURE__*/_jsxDEV(Formik, {\n    initialValues: {\n      content: \"\"\n    },\n    validationSchema: Yup.object({\n      content: Yup.string().min(5, t(\"validation:atLeast\", {\n        number: 5\n      })).max(1000, t(\"validation:lessThan\", {\n        number: 1000\n      })).required(t(\"validation:required\"))\n    }),\n    onSubmit: onSubmit,\n    children: formik => /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Card, {\n        className: \"mb-4 py-2 px-3 bg-light boxShadow\",\n        children: /*#__PURE__*/_jsxDEV(Form, {\n          onSubmit: formik.handleSubmit,\n          children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n            className: \"mb-2\",\n            controlId: \"content\",\n            children: /*#__PURE__*/_jsxDEV(FloatingLabel, {\n              label: t(\"addNewComment\"),\n              children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n                type: \"text\",\n                as: \"textarea\",\n                name: \"content\",\n                ref: textAreaRef,\n                onChange: formik.handleChange,\n                onBlur: formik.handleBlur,\n                value: formik.values.content,\n                isValid: formik.touched.content && !formik.errors.content && formik.values.content,\n                isInvalid: formik.touched.content && formik.errors.content\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 65,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Form.Control.Feedback, {\n                type: \"invalid\",\n                children: formik.errors.content\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 80,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex mb-2 justify-content-end\",\n            children: /*#__PURE__*/_jsxDEV(SubmitButton // isSubmitted={isSubmitted}\n            , {\n              isSubmitting: formik.isSubmitting,\n              name: t(\"addNewComment\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 11\n      }, this), isSubmitted && /*#__PURE__*/_jsxDEV(Banner, {\n        className: \"text-success border-success mb-4\",\n        message: `${t(\"addedBy\", {\n          type: \"comment\"\n        })} ${authCtx.userName}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, this);\n};\n\n_s(NewCommentForm, \"W5f/LI87JWZMM/lcnEUr4ZYyKto=\", false, function () {\n  return [useTranslation];\n});\n\n_c = NewCommentForm;\nexport default NewCommentForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"NewCommentForm\");","map":{"version":3,"names":["React","useContext","useEffect","useRef","useState","Card","FloatingLabel","Form","Formik","Yup","SubmitButton","Banner","AuthContext","submitNewComment","useTranslation","NewCommentForm","postId","onContentChange","isSubmitted","setIsSubmitted","authCtx","textAreaRef","t","onSubmit","comment","formikHelpers","setTimeout","id","token","then","resetForm","catch","error","console","log","finally","setSubmitting","current","style","height","content","object","string","min","number","max","required","formik","handleSubmit","handleChange","handleBlur","values","touched","errors","isSubmitting","type","userName"],"sources":["E:/React Appliction/Running Apps/blog-frontend/src/Components/Forms/NewCommentForm.js"],"sourcesContent":["import React, { useContext, useEffect, useRef, useState } from \"react\";\nimport { Card, FloatingLabel, Form } from \"react-bootstrap\";\nimport { Formik } from \"formik\";\nimport * as Yup from \"yup\";\nimport SubmitButton from \"../SubmitButton\";\nimport Banner from \"../Banner\";\nimport AuthContext from \"../../store/auth-context\";\nimport { submitNewComment } from \"../../lib/api\";\nimport { useTranslation } from \"react-i18next\";\n\nconst NewCommentForm = ({ postId, onContentChange }) => {\n  const [isSubmitted, setIsSubmitted] = useState(false);\n  const authCtx = useContext(AuthContext);\n  const textAreaRef = useRef(null);\n  const { t } = useTranslation();\n\n  const onSubmit = (comment, formikHelpers) => {\n    setTimeout(() => {\n      submitNewComment({ id: postId, ...comment }, authCtx.token)\n        .then(() => {\n          formikHelpers.resetForm();\n          setIsSubmitted(true);\n        })\n        .catch((error) => {\n          console.log(error);\n        })\n        .finally(() => {\n          formikHelpers.setSubmitting(false);\n        });\n    }, 2000);\n  };\n\n  useEffect(() => {\n    setTimeout(() => {\n      if (isSubmitted) {\n        setIsSubmitted(false);\n        onContentChange();\n      }\n    }, 2000);\n  }, [isSubmitted]);\n\n  useEffect(() => {\n    textAreaRef.current.style.height = \"100px\";\n  });\n\n  return (\n    <Formik\n      initialValues={{\n        content: \"\",\n      }}\n      validationSchema={Yup.object({\n        content: Yup.string()\n          .min(5, t(\"validation:atLeast\", { number: 5 }))\n          .max(1000, t(\"validation:lessThan\", { number: 1000 }))\n          .required(t(\"validation:required\")),\n      })}\n      onSubmit={onSubmit}\n    >\n      {(formik) => (\n        <>\n          <Card className=\"mb-4 py-2 px-3 bg-light boxShadow\" >\n            <Form onSubmit={formik.handleSubmit}>\n              <Form.Group className=\"mb-2\" controlId=\"content\">\n                <FloatingLabel label={t(\"addNewComment\")}>\n                  <Form.Control\n                    type=\"text\"\n                    as=\"textarea\"\n                    name=\"content\"\n                    ref={textAreaRef}\n                    onChange={formik.handleChange}\n                    onBlur={formik.handleBlur}\n                    value={formik.values.content}\n                    isValid={\n                      formik.touched.content &&\n                      !formik.errors.content &&\n                      formik.values.content\n                    }\n                    isInvalid={formik.touched.content && formik.errors.content}\n                  ></Form.Control>\n                  <Form.Control.Feedback type=\"invalid\">\n                    {formik.errors.content}\n                  </Form.Control.Feedback>\n                </FloatingLabel>\n              </Form.Group>\n              <div className=\"d-flex mb-2 justify-content-end\">\n                <SubmitButton\n                  // isSubmitted={isSubmitted}\n                  isSubmitting={formik.isSubmitting}\n                  name={t(\"addNewComment\")}\n                />\n              </div>\n            </Form>\n          </Card>\n          {isSubmitted && (\n            <Banner\n              className=\"text-success border-success mb-4\"\n              message={`${t(\"addedBy\", { type: \"comment\" })} ${\n                authCtx.userName\n              }`}\n            />\n          )}\n        </>\n      )}\n    </Formik>\n  );\n};\n\nexport default NewCommentForm;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}